(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5459],{35459:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return es}});var l=r(70865),a=r(96670),o=r(26297),t=r(66383),c=r(52322),s=r(2784),i=r(5632),d=r(98780),u=r(64177),p=r(72677),h=r(45368),m=r(57163),v=r(50603),x=r(64665),f=r(26442),I=r(11559),g=r(34895),C=r(67418),k=r(59673),y=r(58399),S=r(42306),j=r(58449),_=r(43997),b=r(31909),N=r(98723),w=r(56195),T=r(12205),B=r(88413),O=r(6013),A=r(55985),Z=r(41435),E=r(644),H=r(97411);function D(e){var n=e.className,r=e.items,l=e.title,a=e.CROId,o=e.rightIcon,t=e.leftIcon,s=e.leftIconOnClick,i=e.sendBigDataSearchAutoCompleteTracker;return(0,c.jsxs)("div",{className:(0,p.d)("py-2 hide-scrollbar",n),children:[(0,c.jsx)(w.H,{label:l,rightIcon:o,rightIconColor:"low-emphasis",alignItems:"start",leftIcon:t,leftIconColor:"low-emphasis",leftIconOnClick:s,className:"px-5 lg:px-4 xs:py-2"}),(0,c.jsx)("div",{className:"flex w-full",children:(0,c.jsx)(H.l,{sliderProps:{spaceBetween:8},navigationButtonSize:"small",navigationButtonsHasShadow:!0,items:r.map(function(e,n){var l;return(0,c.jsx)(N.r,{onClick:(l=e.title,function(){null==i||i({searchType:B.Bj,trendTitle:l})}),to:e.url,CROId:a,shouldHandleUrlAndOnClick:!0,className:(0,p.d)("inline-block shrink-0",{"mr-14":0===n,"ml-2":n===r.length-1}),children:(0,c.jsx)(E.A,{size:"medium",className:"xs:pl-1",icon:"chevronLeft",label:e.title,iconPosition:"left"})},e.title)}),className:"gap-2 w-full"})})]})}var L=r(89086),P=r(3104),q=r(57306);function F(e){var n=e.className,r=e.productTitleFa,t=e.productPropertiesIsAd,s=e.productUrl,i=e.productVariantPriceSellingPrice,d=e.productImageUrl,u=e.productId,h=e.sendBigDataSearchAutoCompleteTracker,m=(0,o.Z)(e,["className","productTitleFa","productPropertiesIsAd","productUrl","productVariantPriceSellingPrice","productImageUrl","productId","sendBigDataSearchAutoCompleteTracker"]);return(0,c.jsxs)(N.r,(0,a.Z)((0,l.Z)({className:(0,p.d)("flex items-center border-complete rounded-medium p-2",n),to:s},m),{onClick:function(){h({productId:u,productTitleFa:r,searchType:B.tq})},shouldHandleUrlAndOnClick:!0,children:[(0,c.jsx)(b.E,{objectFit:"cover",width:60,height:60,className:"ml-3 shrink-0",src:d}),i||t?(0,c.jsxs)("div",{className:"grow",children:[(0,c.jsx)("p",{className:"text-body-2 text-neutral-700",children:r}),(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[t&&(0,c.jsx)(P.n,{}),(0,c.jsx)(q.t,{})]})]}):(0,c.jsx)("p",{className:"text-body-2 text-neutral-700 grow ellipsis-2",children:r})]}))}var U=r(86582),R=r.n(U);function z(e){var n=e.className,r=e.products,o=e.sendBigDataSearchAutoCompleteTracker;return(0,c.jsx)(H.l,{items:r.map(function(e,n){return(0,c.jsx)("div",{children:(0,c.jsx)(F,(0,l.Z)({sendBigDataSearchAutoCompleteTracker:function(e){o((0,a.Z)((0,l.Z)({},e),{index:n}))},className:(0,p.d)(R().BaseLayoutSearch__productCard,{"mr-5 lg:mr-3":0===n,"ml-2":n===r.length-1})},e,(0,L.t)("searchbox-product-click")))},e.productId)}),navigationButtonSize:"small",navigationButtonsHasShadow:!0,sliderProps:{spaceBetween:8},className:(0,p.d)("gap-2",n)})}function M(e){var n=e.keyword,r=e.searchItemOnClick,o=e.sendBigDataSearchAutoCompleteTracker;return(0,c.jsx)("div",(0,a.Z)((0,l.Z)({onClick:function(e){o({searchType:B.Tn,keyword:n}),null==r||r(e)}},(0,L.t)("searchbox-suggested-search")),{children:(0,c.jsx)(w.H,{url:(0,f.Gr)({url:(0,f.XH)(),queries:{q:n}}),label:n,rightIcon:"searchSearch",rightIconColor:"low-emphasis",leftIcon:"searchPlaceSuggest",leftIconColor:"low-emphasis"})}))}var K=function(e){var n,r,o,i,h=e.className,m=e.searchTerm,v=e.categories,x=e.keywords,I=e.products,g=e.trends,C=e.searchItemOnClick,k=e.advanceLinks,y=e.banner,S=e.sendBigDataSearchAutoCompleteTracker,E=(0,_.I0)(),H=(0,u.C)().isDesktop,L=(0,_.v9)(O.p.searchHistory),P=(0,t.Z)((0,s.useState)([]),2),q=P[0],F=P[1],U=(0,j.k)(m);(0,s.useEffect)(function(){var e;F(null===(e=Array.from(L||[]))||void 0===e?void 0:e.reverse())},[L]);var R=function(e,n){return function(){S((0,l.Z)({searchType:B.qi,index:n},e))}},K=(0,p.d)("pt-3 pb-4 br-list-vertical-no-padding-200",h);return(0,c.jsxs)("div",{className:K,children:[!(0,Z.x)(I)&&!U&&(0,c.jsx)(z,{sendBigDataSearchAutoCompleteTracker:S,products:I}),(0,c.jsxs)("div",{className:"px-5 lg:px-4",children:[y&&U&&H&&(0,c.jsx)(T.j,(0,a.Z)((0,l.Z)({className:"mt-4",bannerType:"b"},y),{onClick:function(){S((0,l.Z)({searchType:B.XI,index:0},y))},shouldHandleUrlAndOnClick:!0})),(0,c.jsxs)("div",{className:"br-list-vertical-no-padding-200",children:[!U&&!(0,Z.x)(k)&&(null==k?void 0:null===(n=k.map)||void 0===n?void 0:n.call(k,function(e,n){var r,a,o,t,s,i,u,p,h,m,v,x,f;return(null==e?void 0:e.brand)?(0,c.jsxs)(N.r,{onClick:(f=null==e?void 0:e.brand,function(){S((0,l.Z)({searchType:B.cT,index:n},f))}),shouldHandleUrlAndOnClick:!0,to:null==e?void 0:null===(r=e.brand)||void 0===r?void 0:r.brandUrl,className:"flex items-center py-2",children:[(null==e?void 0:null===(a=e.brand)||void 0===a?void 0:a.brandLogo)&&(0,c.jsx)(b.E,{src:null==e?void 0:null===(o=e.brand)||void 0===o?void 0:o.brandLogo,alt:null==e?void 0:null===(t=e.brand)||void 0===t?void 0:t.brandTitleFa,rounded:4,className:"ml-2",width:32,height:32,objectFit:"contain"}),(0,c.jsxs)("p",{className:"text-subtitle-strong text-neutral-700",children:["همه کالاهای برند ",null==e?void 0:null===(s=e.brand)||void 0===s?void 0:s.brandTitleFa]})]},null==e?void 0:null===(i=e.brand)||void 0===i?void 0:i.brandId):(null==e?void 0:e.category)?(0,c.jsxs)(N.r,{onClick:R(null==e?void 0:e.category,n),shouldHandleUrlAndOnClick:!0,to:null==e?void 0:null===(u=e.category)||void 0===u?void 0:u.categoryUrl,className:"flex items-center py-2",children:[(0,c.jsx)(d.J,{icon:"categoryOutline",color:"low-emphasis",size:24,className:"ml-4"}),(0,c.jsxs)("p",{className:"text-subtitle-strong text-neutral-700",children:["همه کالاهای ",null==e?void 0:null===(p=e.category)||void 0===p?void 0:p.categoryTitleFa]})]},null==e?void 0:null===(h=e.category)||void 0===h?void 0:h.categoryId):(null==e?void 0:e.seller)?(0,c.jsxs)(N.r,{onClick:R(null==e?void 0:e.seller,n),shouldHandleUrlAndOnClick:!0,to:null==e?void 0:null===(m=e.seller)||void 0===m?void 0:m.sellerUrl,className:"flex items-center py-2",children:[(0,c.jsx)(d.J,{icon:"seller",color:"low-emphasis",size:24,className:"ml-4"}),(0,c.jsxs)("p",{className:"text-subtitle-strong text-neutral-700",children:["همه کالاهای ",null==e?void 0:null===(v=e.seller)||void 0===v?void 0:v.sellerTitle]})]},null==e?void 0:null===(x=e.seller)||void 0===x?void 0:x.sellerId):null})),!U&&!(0,Z.x)(v)&&(null==v?void 0:null===(r=v.map)||void 0===r?void 0:r.call(v,function(e,n){return(0,c.jsx)(N.r,{onClick:R(e,n),shouldHandleUrlAndOnClick:!0,to:(0,f.Gr)({url:(0,f.h1)(e.categoryCode),queries:{q:e.categoryKeyword}}),CROId:"searchbox-categories",children:(0,c.jsx)(w.H,{rightIcon:"searchSearch",rightIconColor:"low-emphasis",alignItems:"start",label:null==e?void 0:e.categoryKeyword,bottomSlot:(0,c.jsxs)("div",{className:"text-body1-strong",children:[(0,c.jsx)("span",{className:"text-neutral-500",children:"در دسته"})," ",(0,c.jsx)("span",{className:"text-secondary-500",children:null==e?void 0:e.categoryTitle})]}),src:null==e?void 0:e.categorySrc})},null==e?void 0:e.categoryId)}))]}),!U&&!(0,Z.x)(x)&&(0,c.jsx)("div",{className:"br-list-vertical-no-padding-200",children:null==x?void 0:null===(o=x.map)||void 0===o?void 0:o.call(x,function(e){return(0,c.jsx)(M,{keyword:e,searchItemOnClick:C,sendBigDataSearchAutoCompleteTracker:S},e)})})]}),!(0,Z.x)(L)&&U&&(0,c.jsx)(D,{title:"آخرین جستجوهای شما",rightIcon:"searchHistory",CROId:"searchbox-last-search",items:null==q?void 0:null===(i=q.map)||void 0===i?void 0:i.call(q,function(e){return{title:e,url:(0,f.Gr)({url:(0,f.XH)(),queries:{q:e}})}}),leftIcon:"delete",leftIconOnClick:function(){E((0,A.zN)([]))}}),!(0,Z.x)(g)&&(0,c.jsx)(D,{sendBigDataSearchAutoCompleteTracker:S,title:"جستجوهای پرطرفدار",rightIcon:"searchTrend",CROId:"searchbox-popular-search",items:g})]})},G=r(47842),J=r(72610),X=r(97156),V=r(67726),W=r.n(V),Q=function(e){var n,r=e.className,o=e.children,t=e.searchTerm,i=e.isActive,u=e.onClick,h=e.prependIconOnClick,m=e.appendIconOnClick,v=e.showBackIcon,x=e.hasAppendIcon,f=e.hasPendingRequest,I=e.appendIcon,g=e.prependIcon,C=e.prependIconColor,k=e.inputMode,y=e.placeholder,S=e.onBackClick,j=e.onSearchTermChange,_=e.hasShadow,b=e.rounded,N=e.bordered,w=e.withWrapperPadding,T=e.onKeyDown,B=e.inputClassName,O=e.placeholderClassName,A=e.withActiveStyles,Z=e.hasEllipsisClass,E=e.isOpen,H=e.autoFocus,D=(0,s.useRef)();(0,s.useEffect)(function(){if(E&&H){var e=setTimeout(function(){D.current&&D.current.focus()},100);return function(){return clearTimeout(e)}}},[E,H]);var P=(0,p.d)("flex items-center",W().SearchInput,[W().SearchInput__searchInput],(n={},(0,G.Z)(n,W()["SearchInput--shadow"],void 0===_||_),(0,G.Z)(n,W()["SearchInput--rounded"],b),(0,G.Z)(n,W()["SearchInput--bordered"],N),(0,G.Z)(n,W()["SearchInput--active"],k&&A),(0,G.Z)(n,"rounded-small",!r),(0,G.Z)(n,"p-3",!r),(0,G.Z)(n,"ellipsis",Z),n),r),q=(0,p.d)("grow",{"px-2 lg:px-4":!i&&(void 0===w||w),ellipsis:Z}),F=t&&i,U=function(){return I||(F?"clear":null)};return(0,c.jsx)("div",(0,a.Z)((0,l.Z)({},(0,L.t)("searchbox-click")),{className:P,onClick:u,children:(0,c.jsxs)("div",{className:"flex items-center justify-between grow min-w-0",children:[(v||g||!i)&&(0,c.jsx)(d.J,{color:C||(i||v?"high-emphasis":"low-emphasis"),onClick:S||h,icon:g||(v?"arrowRight":!i&&"searchSearch")}),(0,c.jsx)("span",(0,a.Z)((0,l.Z)({},(0,L.t)("searchbox-type")),{className:q,children:o||(k?(0,c.jsx)(X.n,{inputClassName:(0,p.d)("text-neutral-500 text-body-2",B),shape:"withoutBorder",autoFocus:!0,value:t,onChange:j,fullWidth:!0,placeholder:y,name:"search-input",onKeyDown:T,ref:D,inputProps:{autocomplete:"off"}}):(0,c.jsx)("div",{className:(0,p.d)({"text-neutral-500 text-body-2":!O},O),children:y}))})),f&&(0,c.jsx)(J.g,{size:"24"}),(x||F)&&!f&&U()&&(0,c.jsx)(d.J,{onClick:m,icon:U()})]})}))},Y=r(1324),$=r(90917),ee=r(25388),en=r(60036),er=r(79968),el=r(82382),ea=r(73587),eo=(0,Y.q)({url:"/autocomplete/",transformer:function(e){var n,r,o,t,c,s,i,d,u,p,h=e.data;return{categories:null==h?void 0:null===(n=h.categories)||void 0===n?void 0:null===(r=n.map)||void 0===r?void 0:r.call(n,function(e){return(0,a.Z)((0,l.Z)({},(0,$.n)({data:null==e?void 0:e.category})),{categoryKeyword:null==e?void 0:e.keyword})}),advanceLinks:null==h?void 0:null===(o=h.advance_links)||void 0===o?void 0:o.map(function(e){return(null==e?void 0:e.brand)?{brand:(0,en.Q)({data:null==e?void 0:e.brand})}:(null==e?void 0:e.category)?{category:(0,$.n)({data:null==e?void 0:e.category})}:(null==e?void 0:e.seller)?{seller:(0,el.N)({data:null==e?void 0:e.seller})}:void 0}),keywords:null==h?void 0:null===(t=h.auto_complete)||void 0===t?void 0:null===(c=t.map)||void 0===c?void 0:c.call(t,function(e){return null==e?void 0:e.keyword}),products:null==h?void 0:null===(s=h.suggestion_products)||void 0===s?void 0:null===(i=s.map)||void 0===i?void 0:i.call(s,function(e){return(0,ea.r)({data:e})}),trends:null==h?void 0:null===(d=h.trends)||void 0===d?void 0:null===(u=d.map)||void 0===u?void 0:u.call(d,function(e){return{title:e.keyword,url:(0,er.f)({data:e.url})}}),banner:(0,ee.C)({data:null==h?void 0:null===(p=h.banner)||void 0===p?void 0:p[0]}),onEnterUrl:(0,er.f)({data:null==h?void 0:h.open_on_enter})}}}),et=function(e){var n=e.initialSearchTerm,r=void 0===n?"":n,a=e.className,o=e.footer,d=e.appendIcon,h=e.prependIcon,_=e.onClose,b=e.isOpen,N=e.searchItemOnClick,w=e.referenceElement,T=e.hasAppendIcon,B=function(){null==_||_()},O=(0,p.d)("p-0",a),A=(0,t.Z)((0,s.useState)(),2),Z=A[0],E=A[1],H=(0,t.Z)((0,s.useState)(r),2),D=H[0],L=H[1],P=(0,m.Nr)(D,500),q=(0,i.useRouter)(),F=(0,I.E)({apiMethod:eo}),U=F.request,z=F.pending;(0,s.useEffect)(function(){b&&U({q:P}).then(E)},[P,b]),(0,s.useEffect)(function(){return B},[]),(0,s.useEffect)(function(){L(r)},[r]);var M=function(){(0,g.cr)({searchTerm:D,keywords:null==Z?void 0:Z.keywords,categories:null==Z?void 0:Z.categories,products:null==Z?void 0:Z.products,advanceLinks:null==Z?void 0:Z.advanceLinks})},G=function(e){M(),(0,S.d)(x.X.SEARCH_DATA_LAYER)&&(0,C.y_)({event:y.k.SEARCH_ITEM,ecommerce:{search_items:e,page_url_path:(0,k.b)()}}),null==_||_(),q.push((null==Z?void 0:Z.onEnterUrl)?Z.onEnterUrl:(0,f.Gr)({url:(0,f.XH)(),queries:{q:e}}))},J=(0,u.C)().isDesktop;return(0,c.jsx)(v.Modal,{isOpen:b,isFullScreen:!0,isHeaderFixed:!1,hasCloseIcon:!1,headerHideBottomBorder:!0,headerClassName:"py-2 lg:py-0",header:(0,c.jsx)(Q,{autoFocus:!0,isOpen:b,className:"bg-neutral-000 mx-4",inputClassName:"text-body-2",hasShadow:!1,hasPendingRequest:z,hasAppendIcon:void 0===T||T,showBackIcon:!J,searchTerm:D,isActive:!0,prependIconOnClick:function(e){if(null==e||e.stopPropagation(),!(0,j.k)(D)){G(D);return}null==_||_()},appendIconOnClick:function(e){null==e||e.stopPropagation(),L("")},onSearchTermChange:function(e){return L(e.target.value)},appendIcon:d,prependIcon:h,inputMode:!0,onKeyDown:function(e){if("Enter"===e.key){if(!(0,j.k)(D)){G(e.target.value);return}null==_||_()}},withActiveStyles:!0,placeholder:"جستجو"}),footer:o,isFooterFixed:!0,isPopperInDesktop:!0,popperProps:{isOverlay:!0,unmountOnClose:!0,overflow:"auto",className:(0,p.d)("z-2 top-0",R().BaseLayoutSearch__popper)},onDismiss:_,childrenClassName:"hide-scrollbar",referenceElement:w,className:O,children:(0,c.jsx)(K,(0,l.Z)({searchTerm:D,searchItemOnClick:N,debouncedSearchTerm:P,pending:z,className:"top-0 right-0",sendBigDataSearchAutoCompleteTracker:function(e){M(),(0,g.EA)({searchTerm:D,clickedItem:e})}},Z))})},ec={input:"input",icon:"icon"},es=function(e){var n=e.placeholderSlot,r=e.placeholderSlotClassName,m=e.appendIcon,v=e.prependIcon,x=e.showBackIcon,f=e.hasAppendIcon,I=e.modalFooter,g=e.prependIconOnClick,C=e.searchItemOnClick,k=e.appendIconOnClick,y=e.isMegaMenuOpen,S=e.className,j=e.inputType,_=void 0===j?ec.input:j,b=(0,o.Z)(e,["placeholderSlot","placeholderSlotClassName","appendIcon","prependIcon","showBackIcon","hasAppendIcon","modalFooter","prependIconOnClick","searchItemOnClick","appendIconOnClick","isMegaMenuOpen","className","inputType"]),N=(0,i.useRouter)().query.q,w=(0,t.Z)((0,s.useState)(!1),2),T=w[0],B=w[1],O=(0,s.useRef)(null),A=(0,u.C)().isDesktop,Z=function(){return B(!0)},E=function(){return B(!1)};return(0,s.useEffect)(function(){y&&A&&B(!1)},[y]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:(0,p.d)("relative",S),children:[_===ec.input&&(0,c.jsx)("div",{className:R().BaseLayoutSearch,children:(0,c.jsx)(Q,{className:"bg-neutral-100 grow rounded px-2 lg:px-4 text-body-2",inputClassName:"",hasAppendIcon:f,showBackIcon:x,onClick:Z,prependIconOnClick:function(e){g&&(null==e||e.stopPropagation(),null==e||e.preventDefault(),g())},appendIconOnClick:function(e){k&&(null==e||e.stopPropagation(),null==e||e.preventDefault(),k())},appendIcon:m,prependIcon:v,hasEllipsisClass:!0,hasShadow:!1,children:(0,c.jsx)("div",{className:(0,p.d)("text-neutral-500 flex items-center",r,{"text-body-2":!r}),children:N||n})})}),_===ec.icon&&(0,c.jsx)("span",(0,a.Z)((0,l.Z)({onClick:Z},b),{children:(0,c.jsx)(d.J,(0,l.Z)({size:24,icon:"searchSearch",className:"cursor-pointer"},b))})),(0,c.jsx)(et,{referenceElement:O,searchItemOnClick:function(e){E(),null==C||C(e)},footer:I,isOpen:T,onClose:E,hasAppendIcon:f,prependIcon:v,initialSearchTerm:N})]}),(0,c.jsx)(h.W,{isVisible:T})]})}},56195:function(e,n,r){"use strict";r.d(n,{H:function(){return t}});var l=r(70865),a=r(52322),o=r(31038);function t(e){return(0,a.jsx)(o.H,(0,l.Z)({},e))}},86582:function(e){e.exports={BaseLayoutSearch:"BaseLayoutSearch_BaseLayoutSearch__QHPTB",BaseLayoutSearch__popper:"BaseLayoutSearch_BaseLayoutSearch__popper__SGa9Y",BaseLayoutSearch__formComponentFrame:"BaseLayoutSearch_BaseLayoutSearch__formComponentFrame__AqyDr",BaseLayoutSearch__productCard:"BaseLayoutSearch_BaseLayoutSearch__productCard__2gkuS"}},67726:function(e){e.exports={SearchInput:"SearchInput_SearchInput__HB9qi",SearchInput__searchInput:"SearchInput_SearchInput__searchInput__CEpaj","SearchInput--shadow":"SearchInput_SearchInput--shadow__HZ03k","SearchInput--rounded":"SearchInput_SearchInput--rounded__i_U8j","SearchInput--bordered":"SearchInput_SearchInput--bordered__Nq1mx","SearchInput--active":"SearchInput_SearchInput--active__U9csa"}}}]);